<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Test Form</title>

	<script src="../js/jquery-1.8.2.min.js"></script>	
	<script type="text/javascript" src="https://js.stripe.com/v1/"></script>
	<script type="text/javascript">
	    // this identifies your website in the createToken call below
	    Stripe.setPublishableKey('pk_test_Vt3bh8kq7E1FRWhk8Id61GZ8');

	    function stripeResponseHandler(status, response) {
	        if (response.error) {
	            // re-enable the submit button
	            $('.submit-button').removeAttr("disabled");
	            // show the errors on the form
	            $(".payment-errors").html(response.error.message);
	        } else {
	            var form$ = $("#payment-form");
	            // token contains id, last4, and card type
	            var token = response['id'];
	            // insert the token into the form so it gets submitted to the server
	            form$.append("<input type='hidden' name='stripeToken' value='" + token + "' />");
	            // and submit
	            form$.get(0).submit();
	        }
	    }

	    $(document).ready(function() {
	        $("#payment-form").submit(function(event) {
	            // disable the submit button to prevent repeated clicks
	            $('.submit-button').attr("disabled", "disabled");
	            // createToken returns immediately - the supplied callback submits the form if there are no errors
	            Stripe.createToken({
	                number: $('.card-number').val(),
	                cvc: $('.card-cvc').val(),
	                exp_month: $('.card-expiry-month').val(),
	                exp_year: $('.card-expiry-year').val()
	            }, stripeResponseHandler);
	            return false; // submit from callback
	        });
	    });

	</script>

</head>
<body>

<form action="add-donation.php" method="post">
	<fieldset>
		<legend>Submit to DB</legend>
		<input type="text" name="name" id="" placeholder="Name">
		<input type="text" name="email" id="" placeholder="Email">
		<input type="text" name="amount" id="" placeholder="Amount">
		<input type="submit" value="Submit">
	</fieldset>
</form>

<br>

<span class="payment-errors"></span>
<form action="add-donation.php" method="POST" id="payment-form">
	<fieldset>
		<legend>Process credit card with Stripe</legend>
	    <div class="form-row">
	        <label>Name</label>
	        <input type="text" autocomplete="off" name="name" value="Test User" />
	    </div>
	    <div class="form-row">
	        <label>Email</label>
	        <input type="text" autocomplete="off" name="email" value="test@user.com" />
	    </div>
	    <div class="form-row">
	        <label>Amount</label>
	        <label><input type="radio" name="amount" id="" value="5"> $5</label>
	        <label><input type="radio" name="amount" id="" value="15" checked> $15</label>
	        <label><input type="radio" name="amount" id="" value="50"> $50</label>
	        <label>
	        	<input type="radio" name="amount" id="" value="other"> Other
	        	<input type="text" autocomplete="off" name="amount-other">
	        </label>
	    </div>
	    <div class="form-row">
	        <label>Card Number</label>
	        <input type="text" size="20" autocomplete="off" class="card-number" value="4242424242424242" />
	    </div>
	    <div class="form-row">
	        <label>CVC</label>
	        <input type="text" size="4" autocomplete="off" class="card-cvc" value="123" />
	    </div>
	    <div class="form-row">
	        <label>Expiration (MM/YYYY)</label>
	        <input type="text" size="2" class="card-expiry-month" value="12" />
	        <span> / </span>
	        <input type="text" size="4" class="card-expiry-year" value="2013" />
	    </div>
	    <button type="submit" class="submit-button">Submit Payment</button>
	</fieldset>
</form>

<br>

<form action="process-credit-card.php" method="post">
	<fieldset>
		<legend>Process credit card with Paypal</legend>
		<input type="text" name="CREDITCARDTYPE" id="" value="Visa">
		<input type="text" name="ACCT" id="" value="4939237357941588">
		<input type="text" name="EXPDATE" id="" value="122017">
		<input type="text" name="CVV2" id="" value="123">
		<input type="text" name="FIRSTNAME" id="" value="Buyer">
		<input type="text" name="LASTNAME" id="" value="Account">
		<input type="text" name="EMAIL" id="" value="buyer_1354910120_per@mailinator.com">
		<input type="text" name="STREET" id="" value="707 W. Bay Drive">
		<input type="text" name="CITY" id="" value="Largo">
		<input type="text" name="STATE" id="" value="FL">
		<input type="text" name="COUNTRYCODE" id="" value="US">
		<input type="text" name="ZIP" id="" value="33770">
		<input type="text" name="AMT" id="" value="100.00">
		<input type="text" name="CURRENCYCODE" id="" value="USD">
		<input type="text" name="DESC" id="" value="Donation to Red Cross via Bell Ringer site.">
		
		<input type="submit" value="Submit">
	</fieldset>
</form>	

</body>
</html>